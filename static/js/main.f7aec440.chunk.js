(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{372:function(e,t,a){e.exports=a(698)},377:function(e,t,a){},379:function(e,t,a){},698:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(29),o=a.n(r),c=(a(377),a(378),a(51)),l=(a(379),a(92)),s=a.n(l),d=a(196),u=a(48),f=a.n(u);function h(e){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(s.a.mark((function e(t){var a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return a=e.sent,n=a.split("\n").filter((function(e){return/[A-Z]{2},/.test(e)})).map((function(e){return e.split(",")})).map((function(e){var t=Object(c.a)(e,7),a=t[0],n=t[1],i=t[2],r=t[3],o=t[4],l=t[5],s=t[6];return{community:a,date:f()(n,"DD/MM/YYYY").toDate(),dateStr:f()(n,"DD/MM/YYYY").format(),infected:Number(i),hospitalized:Number(r),intensiveHospitalized:Number(o),deaths:Number(l),recovered:Number(s)}})),i=Array.from(n.reduce((function(e,t){var a=e.get(t.dateStr);return a=a?{date:t.date,dateStr:t.dateStr,infected:a.infected+t.infected,hospitalized:a.hospitalized+t.hospitalized,intensiveHospitalized:a.intensiveHospitalized+t.intensiveHospitalized,deaths:a.deaths+t.deaths,recovered:a.recovered+t.recovered}:Object.assign({},t),e.set(t.dateStr,a)}),new Map).values()),e.abrupt("return",[n,i]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/corona-dashboard","/data/dada.csv"));case 2:return t=e.sent,e.abrupt("return",h(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v,b=i.a.createContext([]),y=a(128),E=a(708),g=a(707),w=a(312),x=a.n(w);!function(e){e.AN="Andalucia",e.AR="Arag\xf3n",e.AS="Asturias",e.IB="Islas Baleares",e.CN="Islas Canarias",e.CB="Cantabria",e.CM="Castilla La Mancha",e.CL="Castilla y Le\xf3n",e.CT="Catalunya",e.CE="Ceuta",e.VC="Valencia",e.EX="Extremadura",e.GA="Galicia",e.MD="Madrid",e.ML="Melilla",e.MC="Murcia",e.NC="Navarra",e.PV="Pais Vasco",e.RI="La Rioja"}(v||(v={}));var j=x.a.zipObject(Object.keys(v),Object.values(v)),S=[{label:"Infected",value:"infected"},{label:"Hospitalized",value:"hospitalized"},{label:"Intensive Hospitalized",value:"intensiveHospitalized"},{label:"Deaths",value:"deaths"},{label:"Recovered",value:"recovered"}];var z=function(e){var t=e.filters,a=e.handleChange,n=Object.entries(j).map((function(e){return{label:e[1],value:e[0]}})),r=Object.values(t.linesToShow).every((function(e){return!0===e}))?[]:[t.linesToShow.hospitalized&&"hospitalized",t.linesToShow.deaths&&"deaths",t.linesToShow.infected&&"infected",t.linesToShow.recovered&&"recovered",t.linesToShow.intensiveHospitalized&&"intensiveHospitalized"];return i.a.createElement(i.a.Fragment,null,i.a.createElement(E.a,{cascade:!1,data:n,value:t.communities,onChange:function(e){a(Object(y.a)({},t,{communities:e}))},searchable:!1}),i.a.createElement("span",{style:{marginRight:"5px"}}),i.a.createElement(g.a,{value:[t.from,t.to],onChange:function(e){a(Object(y.a)({},t,{from:e[0],to:e[1]}))}}),i.a.createElement("span",{style:{marginRight:"5px"}}),i.a.createElement(E.a,{cascade:!1,data:S,value:r,onChange:function(e){var n=e.every((function(e){return!e}));a(Object(y.a)({},t,{linesToShow:{deaths:n||e.includes("deaths"),recovered:n||e.includes("recovered"),hospitalized:n||e.includes("hospitalized"),infected:n||e.includes("infected"),intensiveHospitalized:n||e.includes("intensiveHospitalized")}}))},searchable:!1}))},O=a(31),C=a(710);function M(e){var t=e.stats,a=e.label,n=e.linesToShow,r=e.height,o={type:"monotone",dot:!1,animationDuration:750};return i.a.createElement(C.a,{header:a,bordered:!0,shaded:!0,bodyFill:!0,defaultExpanded:!0,style:{direction:"ltr",margin:"10px 5px",backgroundColor:"white",flexShrink:0}},i.a.createElement("div",{style:{height:r,padding:"0 20px"}},i.a.createElement(O.c,null,i.a.createElement(O.b,{syncId:"communitiesChart",data:t},i.a.createElement(O.e,{dataKey:"dateStr",tickFormatter:function(e){return f()(e).format("DD/MM")}}),i.a.createElement(O.f,{tickFormatter:function(e){return"".concat(Math.floor(e/1e3),"k")},width:30}),i.a.createElement(O.d,{labelFormatter:function(e){return f()(e).format("DD/MM/YY")}}),n.infected&&i.a.createElement(O.a,Object.assign({},o,{dataKey:"infected"})),n.hospitalized&&i.a.createElement(O.a,Object.assign({},o,{dataKey:"hospitalized"})),n.intensiveHospitalized&&i.a.createElement(O.a,Object.assign({},o,{dataKey:"intensiveHospitalized"})),n.deaths&&i.a.createElement(O.a,Object.assign({},o,{dataKey:"deaths"})),n.recovered&&i.a.createElement(O.a,Object.assign({},o,{dataKey:"recovered"}))))))}function D(e){var t=e.linesToShow,a=Object(n.useContext)(b),r=Array.from(new Set(a.map((function(e){return e.community}))));return i.a.createElement("div",{style:{display:"flex",flexDirection:"column",overflowY:"auto",height:"100%",direction:"rtl"}},r.map((function(e,n){return i.a.createElement(M,{linesToShow:t,label:j[e||""]||"",key:n,stats:a.filter((function(t){return t.community===e})),height:"200px"})})))}D.defaultProps={linesToShow:{infected:!0,hospitalized:!0,intensiveHospitalized:!0,deaths:!0,recovered:!0}};var T=D;var H=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),l=Object(c.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)([]),h=Object(c.a)(u,2),m=h[0],v=h[1],y=Object(n.useState)({from:void 0,to:void 0,communities:["MD"],linesToShow:{deaths:!0,recovered:!0,hospitalized:!0,infected:!0,intensiveHospitalized:!0}}),E=Object(c.a)(y,2),g=E[0],w=E[1];return Object(n.useEffect)((function(){var e=m.filter((function(e){return!g.from||e.date>=g.from})).filter((function(e){return!g.to||e.date<=g.to})).filter((function(e){return!(g.communities.length>0)||g.communities.includes(e.community||"")}));r(e)}),[g,m]),Object(n.useEffect)((function(){(function(){return p.apply(this,arguments)})().then((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];v(a),d(n)}))}),[]),i.a.createElement(b.Provider,{value:a},i.a.createElement("div",{className:"App",style:{display:"flex",flexDirection:"column"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start"}},i.a.createElement(z,{filters:g,handleChange:function(e){w(e)}}),i.a.createElement("div",{style:{flexGrow:1,textAlign:"right"}},"Last updated: ",f()("Tue Apr 14 19:35:10 UTC 2020").format("DD/MM"))),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"calc(100% - 50px)"}},i.a.createElement("div",{style:{flexBasis:"35%",height:"100%"}},i.a.createElement(T,{linesToShow:g.linesToShow})),i.a.createElement("div",{style:{flexGrow:1,height:"calc(100% - 50px)"}},i.a.createElement(M,{stats:s,label:"All",linesToShow:g.linesToShow,height:"500px"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[372,1,2]]]);
//# sourceMappingURL=main.f7aec440.chunk.js.map